//
//  CategoryCell.m
//  BusinessScale
//
//  Created by Alvin on 16/1/8.
//  Copyright © 2016年 Alvin. All rights reserved.
//

#import "CategoryCell.h"

@interface CategoryCell()

@property (weak, nonatomic) IBOutlet NSLayoutConstraint *left;
@property (weak, nonatomic) IBOutlet NSLayoutConstraint *weightRight;

@property (weak, nonatomic) IBOutlet UILabel *timeL;
@property (weak, nonatomic) IBOutlet UILabel *weightL;
@property (weak, nonatomic) IBOutlet UILabel *priceL;

@end

@implementation CategoryCell

- (void)awakeFromNib {
    _left.constant = 50*ALScreenScalWidth;
    _weightRight.constant = 120*ALScreenScalWidth;
    
    _timeL.textColor = ALTextColor;
    _weightL.textColor = ALLightTextColor;
    _priceL.textColor = ALNavBarColor;
    
    _sepT = [[UILabel alloc]init];
    _sepT.backgroundColor = separateLabelColor;
    [self addSubview:_sepT];
    
    _sepB = [[UILabel alloc]init];
    _sepB.backgroundColor = separateLabelColor;
//    [self addSubview:_sepB];
}

- (void)layoutSubviews
{
    [super layoutSubviews];
    self.sepT.frame = CGRectMake(25, 0, self.width-25, 0.5);
//    self.sepB.frame = CGRectMake(0, self.height-0.5, self.width, 0.5);
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated {
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

- (void)setItem:(SaleItem *)item
{
    _item = item;
    CGFloat scale = (CGFloat)[UnitTool defaultUnit]/item.unit;
    CGFloat quantity = item.quantity/scale;
    
    _priceL.text = [NSString stringWithFormat:@"%@元",[ALCommonTool decimalPointString:(item.total_price)/100.0f*item.discount]];
    _weightL.text = [NSString stringWithFormat:@"%@%@",[ALCommonTool decimalPointString:quantity],[UnitTool stringFromWeight:[UnitTool defaultUnit]]];
    
    NSDate *date = [NSDate dateWithTimeIntervalInMilliSecondSince1970:item.ts];
    if (self.type == ALProcessViewButtonTagDay) {
        _timeL.text = [NSString stringWithFormat:@"%02d:%02d",(int)date.hour,(int)date.minute];
    }else{
        _timeL.text = [NSString stringWithFormat:@"%i/%i/%i",(int)date.year,(int)date.month,(int)date.day];
    }
    
    
    [self setNeedsDisplay];
}



@end
